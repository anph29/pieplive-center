#:import helper src.utils.helper
<MainView>:
    mainStream: mainStream
    right_content: right_content
    bottom_left:bottom_left
    listMixer: bottom_left.list_mixer
    btn_start:btn_start
    btn_display_mini:btn_display_mini
    btn_switch:btn_switch
    # btn_record:btn_record
    # btn_setting:btn_setting
    videoBuffer:videoBuffer
    canvas.before:
        Color:
            rgb:.12, .15, .18
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:#MainWrapper
        orientation:'horizontal'
        size_hint: None,None
        size: root.width, root.height
        cols:2
        pos: 0,0
        BoxLayout:#LeftContent
            size_hint_x: None
            size_hint_y: 1
            width:root.width - 462
            spacing:5
            padding:5
            RelativeLayout:
                size_hint:1, None
                # height: (self.parent.height - 230)
                height: 720
                canvas.before:
                    Color:
                        rgb:0, 0, 0
                    Rectangle:
                        pos: 0,0
                        size: self.size
                MainStream:
                    id: mainStream
                    size:self.f_width, self.f_height
                    pos:0,0
                      
            BoxLayout:#MainWrapper
                orientation:'horizontal'
                size_hint: 1,None
                height:10
                ProgressBar:
                    id:videoBuffer
                    size_hint: None,1
                    width: self.parent.width - videoDuration.width
                    max: 100
                    value: root.mainStream.camera.buffer_rate * 100
                    opacity:1
                Label:
                    id: videoDuration
                    size_hint: None,1
                    text: helper.convertSecNoToHMS(root.mainStream.camera.duration_current) +"/"+ helper.convertSecNoToHMS(root.mainStream.camera.duration_total)
                    font_size: 13

            BoxLayout:
                id: control
                size_hint:1, None
                orientation:'horizontal'
                height:40
                padding:5
                spacing: 10
                pos_hint:{'x': 0, 'y': 0}
                canvas.before:
                    Color:
                        rgb: .25,.25,.25
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Widget:
                Button:
                    id:btn_start
                    text:'Start Streaming'
                    on_press: root.start_stream()
                Button:
                    id:btn_display_mini
                    text:'Show Display Mini'
                    on_press: root.show_mini_display()
                Button:
                    id:btn_switch
                    text:'Switch Display'
                    on_press: root.switch_display()
                    opacity: (0,1)[root.showMiniD]
                Widget:
                
            BottomLeft:
                id:bottom_left
                size_hint:1,None
                height: 160
                rows:1
                cols:3
                spacing:5

        RightContent:
            id:right_content
            size_hint_x: None
            size_hint_y: 1
            width:460